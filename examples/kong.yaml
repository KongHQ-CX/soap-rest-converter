_format_version: "3.0"
services:
- connect_timeout: 60000
  enabled: true
  host: www.dneonline.com
  name: calculator
  path: /calculator.asmx
  plugins:
  - config:
      ErrorXPath: null
      ExternalDataCacheTTL: 300
      ExternalDataTimeout: 2
      FailIfAuthError: false
      RequestAuthorizationHeader: Authorization
      RequestAuthorizationLocation: none
      RequestAuthorizationXPath: null
      ResponseAuthorizationHeader: Authorization
      ResponseAuthorizationLocation: none
      RouteXPathRegisterNs:
      - soap,http://schemas.xmlsoap.org/soap/envelope/
      VerboseError: null
      xsltTransformRequest: <xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:fn="http://www.w3.org/2005/xpath-functions" xpath-default-namespace="http://www.w3.org/2005/xpath-functions"
        exclude-result-prefixes="fn"> <xsl:output method="xml" indent="yes"/> <xsl:template
        name="main"> <xsl:param name="request-body" required="yes"/> <xsl:variable
        name="json" select="fn:json-to-xml($request-body)"/> <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
        <soap:Body> <xsl:variable name="operation" select="$json/map/string[@key='operation']"/>
        <xsl:element name="{$operation}" xmlns="http://tempuri.org/"> <intA> <xsl:value-of
        select="$json/map/number[@key='intA']"/> </intA> <intB> <xsl:value-of select="$json/map/number[@key='intB']"/>
        </intB> </xsl:element> </soap:Body> </soap:Envelope> </xsl:template> </xsl:stylesheet>
      xsltTransformResponse: <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns="http://www.w3.org/2005/xpath-functions" xmlns:fn="http://www.w3.org/2005/xpath-functions"
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xpath-default-namespace="http://tempuri.org/"
        exclude-result-prefixes="fn"> <xsl:mode on-no-match="shallow-skip"/> <xsl:output
        method="text"/> <xsl:template match="/soap:Envelope/soap:Body/*[ends-with(name(),
        'Response')]/*[ends-with(name(), 'Result')]"> <xsl:variable name="json-result">
        <map xmlns="http://www.w3.org/2005/xpath-functions"> <number key="result">
        <xsl:value-of select="text()"/> </number> </map> </xsl:variable> <xsl:value-of
        select="fn:xml-to-json($json-result)"/> </xsl:template> </xsl:stylesheet>
    enabled: true
    name: soap-rest-converter
    protocols:
    - grpc
    - grpcs
    - http
    - https
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    name: testcalculator
    path_handling: v0
    paths:
    - /testcalculator
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  write_timeout: 60000
- connect_timeout: 60000
  enabled: true
  host: petstore.swagger.io
  name: petstore
  path: /v2/pet
  plugins:
  - config:
      ErrorXPath: null
      ExternalDataCacheTTL: 300
      ExternalDataTimeout: 2
      FailIfAuthError: false
      RequestAuthorizationHeader: Authorization
      RequestAuthorizationLocation: none
      RequestAuthorizationXPath: null
      ResponseAuthorizationHeader: Authorization
      ResponseAuthorizationLocation: none
      RouteXPathRegisterNs:
      - soap,http://schemas.xmlsoap.org/soap/envelope/
      VerboseError: null
      xsltTransformRequest: <xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns="http://www.w3.org/2005/xpath-functions" xmlns:fn="http://www.w3.org/2005/xpath-functions"
        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pet="http://example.com/petstore"
        exclude-result-prefixes="fn soapenv pet"> <xsl:output method="text"/> <xsl:template
        match="/soapenv:Envelope/soapenv:Body"> <xsl:variable name="json-result">
        <map xmlns="http://www.w3.org/2005/xpath-functions"> <string key="name"> <xsl:value-of
        select="pet:AddPet/pet:name" /> </string> <string key="status"> <xsl:value-of
        select="pet:AddPet/pet:status" /> </string> <array key="photoUrls"> <string>
        <xsl:value-of select="pet:AddPet/pet:photoUrls/pet:url" /> </string> </array>
        </map> </xsl:variable> <xsl:value-of select="fn:xml-to-json($json-result)"/>
        </xsl:template> </xsl:stylesheet>
      xsltTransformResponse: <xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xpath-default-namespace="http://www.w3.org/2005/xpath-functions" exclude-result-prefixes="fn">
        <xsl:output method="xml" indent="yes"/> <xsl:template name="main"> <xsl:param
        name="request-body" required="yes"/> <xsl:variable name="json" select="fn:json-to-xml($request-body)"/>
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:pet="http://example.com/petstore"> <soapenv:Body> <pet:identification>
        <xsl:value-of select="$json/map/number[@key='id']" /> </pet:identification>
        <pet:name> <xsl:value-of select="$json/map/string[@key='name']" /> </pet:name>
        <pet:photoUrls> <xsl:for-each select="$json/map/array[@key='photoUrls']/string">
        <pet:url> <xsl:value-of select="."/> </pet:url> </xsl:for-each> </pet:photoUrls>
        </soapenv:Body> </soapenv:Envelope> </xsl:template> </xsl:stylesheet>
    enabled: true
    name: soap-rest-converter
    protocols:
    - grpc
    - grpcs
    - http
    - https
  port: 443
  protocol: https
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    name: petstore
    path_handling: v0
    paths:
    - /petstore
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  write_timeout: 60000
